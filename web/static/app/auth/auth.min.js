"use strict";angular.module("auth",["utils","oauth"]).config(function(){}),angular.module("auth").controller("authController",["$scope","config","$http","messagingService",function(t,e,o,u){function n(t){t?(a.access_token=t.access_token,o.defaults.headers.common.Authorization="Bearer "+a.access_token):(delete o.defaults.headers.common.Authorization,delete a.access_token)}var a=this;a.template=e.get("static_url")+"app/auth/oauth_button.html",a.site_url=e.get("http_host"),a.redirect_uri=e.get("http_host"),a.client_id=e.get("client_id"),a.authorize_path=e.get("auth_path"),a.profile_uri=e.get("profile_uri"),a.revoke_token_path=e.get("revoke_token_path"),a.logout_path=e.get("logout_path"),t.$on("oauth:authorized",function(t,e){n(e)}),t.$on("oauth:loggedOut",function(t,e){o.get(a.logout_path),n(null),u.pub(u.DEFAULT_DOMAIN,"logout",t)}),t.$on("oauth:expired",function(t){n(null)}),t.$on("oauth:profile",function(t,e){u.pub(u.DEFAULT_DOMAIN,"login",e)})}]);