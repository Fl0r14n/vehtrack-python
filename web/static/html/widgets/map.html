<div id="map_canvas" class="map row center-block" ng-controller="MapController as mapCtrl">
    <ui-gmap-google-map center="mapCtrl.map.center" zoom="mapCtrl.map.zoom" options="mapCtrl.map.options">
        <ui-gmap-layer namespace="weather" type="WeatherLayer" show="mapCtrl.show"></ui-gmap-layer>

        <ui-gmap-polyline ng-repeat="p in mapCtrl.polylines"
                          path="p.path"
                          stroke="p.stroke"
                          visible='p.visible'
                          geodesic='p.geodesic'
                          fit="false"
                          editable="p.editable"
                          draggable="p.draggable"
                          icons='p.icons'></ui-gmap-polyline>

<!--
        <ui-gmap-markers doCluster="true" models="mapCtrl.markers" coords="'self'" icon="'icon'" click="'onClick'">
            <ui-gmap-windows show="show">
                <div ng-non-bindable>{{title}}</div>
            </ui-gmap-windows>
        </ui-gmap-markers>
-->


        <ui-gmap-marker fit="true" ng-repeat="marker in mapCtrl.markers" idkey="marker.id" coords="marker" icon="marker.icon" options="marker.options" click="marker.onClick()" events="marker.events" >
            <ui-gmap-window show="marker.show">
                <div>{{marker.title}}</div>
            </ui-gmap-window>
        </ui-gmap-marker>

    </ui-gmap-google-map>
</div>